@page "/"
@using System.Security.Claims
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

<PageTitle>Inicio - Sistema de Gestión</PageTitle>

<AuthorizeView Policy="AdminOnly">
    <Authorized>
        <MudStack Spacing="4">
            <MudPaper Class="pa-4" Elevation="2">
                <MudText Typo="Typo.h4" Color="Color.Primary" GutterBottom="true">
                    ¡Bienvenido, @context.User.Identity?.Name!
                </MudText>
                <MudText Typo="Typo.body1" Class="mb-2">
                    Has iniciado sesión exitosamente en el sistema de gestión de equipos como <strong>Administrador</strong>.
                </MudText>
                <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                    <MudText Typo="Typo.body2">
                        <strong>ID de Usuario:</strong> @context.User.FindFirst(ClaimTypes.NameIdentifier)?.Value
                    </MudText>
                    <MudDivider Vertical="true" FlexItem="true" />
                    <MudText Typo="Typo.body2" Color="Color.Error" Style="display: inline;">
                        <MudIcon Icon="@Icons.Material.Filled.AdminPanelSettings" Size="Size.Small" />
                        <strong>Administrador</strong>
                    </MudText>
                </MudStack>
            </MudPaper>
        </MudStack>
    </Authorized>
    <NotAuthorized>
        <MudStack Spacing="4">
            <MudPaper Class="pa-4" Elevation="2">
                <MudText Typo="Typo.h4" Color="Color.Primary" GutterBottom="true">
                    ¡Bienvenido, @context.User.Identity?.Name!
                </MudText>
                <MudText Typo="Typo.body1" Class="mb-2">
                    Has iniciado sesión exitosamente en el sistema de gestión de equipos.
                </MudText>
                <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                    <MudText Typo="Typo.body2">
                        <strong>ID de Usuario:</strong> @context.User.FindFirst(ClaimTypes.NameIdentifier)?.Value
                    </MudText>
                    <MudDivider Vertical="true" FlexItem="true" />
                    <MudText Typo="Typo.body2" Color="Color.Info" Style="display: inline;">
                        <MudIcon Icon="@Icons.Material.Filled.Person" Size="Size.Small" />
                        <strong>Usuario</strong>
                    </MudText>
                </MudStack>
            </MudPaper>
        </MudStack>
    </NotAuthorized>
</AuthorizeView>
